<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="Registercss.css">
  <title>Document</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
    integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
  <div class="header">
    <h1>Registration Form</h1>
  </div>

  <div class="s">
    <form onsubmit="register()">
      <label for="name">Name:</label>
      <input type="name" id="name" placeholder="Enter name" name="name" required autofocus>
      <br>
      <label for="email">Email:</label>
      <input type="email" id="email" placeholder="Enter email" name="email" required autofocus>
      <br>
      <label for="password">Password:</label>
      <input type="password" id="pswd" placeholder="Enter password" name="pswd" required autofocus minlength="5">
      <br>
      <label for="password">Confirm Password:</label>
      <input type="password" id="cpswd" placeholder="Enter password" name="cpswd" required autofocus>
      <br>
      <br>
      <button type="submit">Submit</button>
    </form>
  </div>

  <script>

    function register() {
      event.preventDefault();
      const name = document.querySelector("#name").value;
      console.log(name);
      if (name == null || name == "" || name.trim() == "") {
        alert("invalid name");
        return false;
      }

      const email = document.querySelector("#email").value;
      console.log(email);
      if (email == null) {
        alert("invalid email");
        return false;
      }

      const pwd = document.querySelector("#pswd").value;
      console.log(pwd);
      if (pwd == "") {
        alert("invalid password");
        return false;
      }

      const cpwd = document.querySelector("#cpswd").value;
      console.log(cpwd);
      if (pwd != cpwd) {
        alert("password doesn't match");
        return false;
      }

      let userObj = {

        "firstName": name,
        "email": email,
        "password": pwd,
        "cpwd": cpwd,
      };

      let url = "https://product-mock-api.herokuapp.com/sportsshopapp/api/v1/auth/register";
      let formData = {
        name: name,
        email: email,
        password: pwd
      }

      axios.post(url, formData).then(res => {
        let data = res.data;
        console.log(data);
        console.log(userObj);

        alert("Registration Successfull");
        window.location.href = "login.html";

      }).catch(err => {
        console.error(err);
        alert("Unable to register");
      });


    }

  </script>

</body>

</html>